
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>PHL API: Open Data APIs from the City of Philadelphia</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      h4 {
        margin-top: 10px;
        margin-bottom: 10px;
      }
      .well {
        word-wrap: break-word;
      }
      .apps {
        padding: 10px;
      }
      .img-rounded {
        padding: 10px;
        margin-left: 10px;
        margin-right: 10px;
      }
      .container-fluid h4 {
        margin-top: 10px;
        margin-bottom: 15px;
        font-size: 17.5px;
      }
    </style>
    <link href="assets/css/bootswatch.css" rel="stylesheet">
    <link href="assets/css/bootstrap-responsive.css" rel="stylesheet">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="assets/ico/apple-touch-icon-57-precomposed.png">
    <link rel="shortcut icon" href="assets/ico/favicon.png">
  </head>

  <body>

    <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="index.html">PHL API</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="libraries.html">Libraries</a></li>
              <li><a href="gallery.html">Gallery</a></li>
              <li><a href="license.html">License</a></li>
              <li><a href="https://groups.google.com/forum/?fromgroups#!forum/opendataphilly">Discuss</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

    <div class="container-fluid">
      <h2>Licenses & Inspections Data API (Beta)</h2>

      <div class="row-fluid">
      <div class="span2">
        <ul class="nav nav-pills nav-stacked" data-spy="affix">
          <li><a href="#endpoints">API endpoints</a></li>
          <li><a href="#locations">Locations</a></li>
          <li><a href="#permits">Permits</a></li>
          <li><a href="#licenses">Licenses</a></li>
          <li><a href="#contractors">Licensed contractors</a></li>
          <li><a href="#cases">Cases</a></li>
          <li><a href="#viloations">Violation details</a></li>
          <li><a href="#zoningappeal">Zoning Board appeals</a></li>
          <li><a href="#liappeal">L&I Review Board appeals</a></li>
          <li><a href="#buildingappeal">Building Board appeals</a></li>
          <li><a href="#hearings">Appeal hearings</a></li>
          <li><a href="#dates">Hearing dates</a></li>
          <li><a href="#samplerequest">Sample data requests</a></li>
          <li><a href="#sampleuse">Sample usage</a></li>
          <li><a href="#notes">Notes</a></li>
        </ul>
      </div>
      <div class="span9">

        <p class="lead">Permit, license, inspection, case and violation data from the Department of Licenses & Inspections. </p>

        <h4 id="endpoints">API Endpoints</h4>

        <table class="table table-bordered table-striped">
          <tr><td>Base Service URL</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/</td></tr>
          <tr><td>Locations</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations</td></tr>
          <tr><td>Permits</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/permits</td></tr>
          <tr><td>Licenses</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/licenses</td></tr>
          <tr><td>Licensed Contractors</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/licensedcontractors</td></tr>
          <tr><td>Cases</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/cases</td></tr>
          <tr><td>Violation Details</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/violationdetails</td></tr>
          <tr><td>Zoning Board Appeals</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/zoningboardappeals</td></tr>
          <tr><td>L&I Review Board Appeals</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/lireviewboardappeals</td></tr>
          <tr><td>Building Board Appeals</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/buildingboardappeals</td></tr>
          <tr><td>Appeal Hearings</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/appealhearings</td></tr>
          <tr><td>Hearing Dates</td><td>http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/hearingdates</td></tr>
         </table>

         <h4 id="locations">Locations</h4>

         <p>A location is typically a street address for a parcel of land or a sub-unit of a parcel. Each location is associated with a city, state, ZIP code, and geographic X-Y coordinates, as well as geographic divisions such as City Council District, Census Tract, Census Block Group, and Political Ward.</p>
         <div id="locations_table"></div>

        <h4 id="permits">Permits</h4>
        <p>A permit grants legal permission to commence work on physical changes or zoning changes to a lot or structure. These include but are not limited to new constructions, alterations, demolitions, occupancy changes, and installations of and modifications to electrical, mechanical, and plumbing systems.</p>
        <p>Each permit has a unique Permit Number. The Application Type Description (and the abbreviated Application Type) indicates the general nature of the permit application (for example: whether the permit is for new construction or mechanical work).</p>
        <p>The Permit Code Description is more specific and describes in detail the objectives of the permitted work. For example, in the case of mechanical work a Code Description may specify the type and number of appliances to be installed (MEC-EQUIPMENT/APPLIANCE INSTAL). There is then a Description of Work for each specific permit to summarize the intent of the work. The Status and Last Modified Date indicate the current standing of the project. Contact information is provided for the primary contact and/or the contractor working on the project.</p>
        <p>View all <a href="permittypes.html">permit codes &amp; descriptions</a>.</p>
        <div id="permits_table"></div>

        <h4 id="licenses">Licenses</h4>

        <p>Licenses are required for individuals and businesses to engage in select commercial activities. For example, vendors and restaurants require a license in order to sell goods and food and trades-people, such as plumbers and contractors, require a license in order to practice their trade. License Type and License Type Description indicates generally the type of license.</p>
        <p>Each license has a unique License Number, an issue date (given when payment and all pre-requisites have been met), and a month and year of expiration. Status indicates whether the license is Active, Inactive, or Expired. Inactive Date indicates if and when a license became inactive before expiring. Primary contact information is provided for each license.</p>
        <p>View all <a href="licensetypes.html">license codes &amp; descriptions</a>.</p>
        <div id="licenses_table"></div>

         <h4 id="contractors">Licensed Contractors</h4>

         <p>Building contractors and certain trades-people such as plumbers and electricians require licenses to practice their trade. Each Licensed Contractor is issued a unique Contractor License Number. Contact information is given for the individual being licensed.</p>

        <div id="contractors_table"></div>

         <h4 id="cases">Cases</h4>

        <p>A case is a recorded instance, created when a property is inspected and cited for one or more violations of the Philadelphia Code. A property will be re-inspected after a certain time interval to see whether or not the violations on the case have been complied. Further actions may be taken by the department to resolve a case. These actions may include clean &amp; seals, demolitions, or sending a case to court. Each case has a unique Case Number and cites a specific Location in violation.</p>

        <p>Each Case is also assigned a Priority, indicating whether the property is Non Hazardous, Unsafe, or Imminently Dangerous. Relevant dates are associated with each Case to indicate when the case was created/added, when it was last updated, and, in the event of a resolution, when the case was resolved.</p>
        <div id="cases_table"></div>

         <h4 id="viloations">Violation Details</h4>

         <p>Each <a href="#cases">Case</a> cites the sections of the Philadelphia Code of which a property is found in violation. These citations are known as Violations, which are given a unique Violation ID for each time the property is found to be in violation. The Violation Code corresponds to the section of the Philadelphia Code being violated and is further described in the synonymous Violation Description. Each Violation has a corresponding Case number and Location, initial date of violation, and Status from the most recent inspection of the Location.</p>
         <div id="violations_table"></div>

         <h4 id="zoningappeal">Zoning Board Appeals</h4>
         <p>See details of appeal review <a href="#notes">below.</a></p>
         <div id="zoningappeal_table"></div>


         <h4 id="liappeal">L&I Review Board Appeals</h4>
         <p>See details of appeal review <a href="#notes">below.</a></p>
         <div id="liappeal_table"></div>

         <h4 id="buildingappeal">Building Board Appeals</h4>
         <p>See details of appeal review <a href="#notes">below.</a></p>
         <div id="buildingappeal_table"></div>

         <h4 id="hearings">Appeal Hearings</h4>
         <div id="hearing_table"></div>

         <h4 id="dates">Hearing Dates</h4>
         <div id="hearing_dates_table"></div>

        <h4 id="samplerequest">Sample Data Requests</h4>

        <p>Get all Locations for Zip Code 19107 ordered by Street Name and Street Number:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations?$filter=substringof('19107',zip)%20eq%20true&orderby=street_name,street_number
        </div>

        <p>Get all Locations for Zip Code 19107 ordered by Street Name and Street Number with a JSON format response and callback:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations?$filter=substringof('19107',zip)%20eq%20true&orderby=street_name,street_number&$format=json&$callback=cb
        </div>

        <p>Get a Location by address with a JSON format. Due to how the database stores street numbers, it would be best to use <code>substringof</code>:</p>

        <div class="well">
        	http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations?$filter=substringof('1234',street_number) eq true and (street_name eq 'MARKET') and (street_suffix eq 'ST')&$format=json
        </div>

        <p>Get all Licenses along with related Locations:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/licenses?$expand=locations
        </div>
        <p>Get a Location for a Permit Number 49648:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/permits('49648')/locations
        </div>

        <p>Get all Zoning Board Appeals for a Location Id 525027:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations(525027)/zoningboardappeals
        </div>

        <p>Get all Cases with a Resolution Code "CLOSED" for a Location Id 525027:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations(525027)/cases?$filter=resolution%20eq%20'CLOSED'
        </div>

        <p>Get all Cases with a Resolution "CLOSED" ordered by Added Datetime descending:</p>

        <div class="well">
          http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/cases?$filter=resolution%20eq%20'CLOSED'&orderby=added_datetime%20desc
        </div>

        <p>Get all Violations by Location ID:</p>

        <div class="well">
        	http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations(525027)/violationdetails
        </div>

        <h4 id="sampleuse">Sample API Consumption (JavaScript)</h4>

        <pre>
          &lt;script type="text/javascript" src="http://code.jquery.com/jquery-1.6.2.min.js"&gt;&lt;/script&gt;
          &lt;script type="text/javascript">
            var mMapReq;
              function ConsumeAPI() {
                mMapReq = $.ajax({
                url: "http://services.phila.gov/PhillyApi/Data/v0.7/Service.svc/locations(2777)?$format=json",
                dataType: "jsonp",
                timeout: 20000,
                jsonp: "$callback",
                jsonpCallback: "RenderLocation"
                });
              }

              function RenderLocation(data) {
              if (data.d != null) {
                var mAddress = data.d.street_number + "&nbsp;";
                mAddress = mAddress + data.d.street_direction + "&nbsp;";
                mAddress = mAddress + data.d.street_name + "&nbsp;";
                mAddress = mAddress + data.d.street_suffix + "&nbsp;";
                mAddress = mAddress + data.d.city + ",&nbsp;";
                mAddress = mAddress + data.d.state;
                $("#AddressHeaderText").html(mAddress);
              }
            }
          &lt;/script&gt;
        </pre>

        <h4 id="notes">Notes</h4>

        <p>Three separate boards hear and review appeals for citations, permit denials and revocations, and building
        variances issued by the Department of Licenses and Inspections and other City agencies. The Zoning Board of
        Adjustment (ZBA) hears and decides appeals in zoning matters, considers special exceptions, and grants
        variances. The L&I Review Board (LIRB) hears appeals to property violations issued by the Department of
        Licenses and Inspections and, in some instances, other city agencies, such as the Water Department and the
        Art and Historical Commissions. The Board of Building Standards (BBS) is an advisory board that reviews
        appeals related to building safety and the application of Philadelphiaâ€™s Building Code.</p>

        <p>Each Appeal has a unique Appeal Key that can be used to get further information about that appeal. Such
        information about each appeal includes an appeal number, application type, grounds (reason) for the appeal,
        the primary applicant applying for the appeal, and the associated Case or Permit. Further information includes
        the date of a previous or upcoming hearing and the decisions made at previous hearings. If an Appeal is
        denied, an applicant may progress the Appeal to Court. If the Appeal progresses to Court, information is
        available for the resulting Court Case once a decision has been reached, including the action date, case
        number, court action, court result, and any provisos.</p>

        <p>This API conforms to the OData protocol specification. More information on the OData specification, including documentation and pre-built client libraries can be found on the <a href="http://www.odata.org/">OData web site</a>.</p>

      </div>
    </div> <!-- /container -->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
    <script type="text/javascript" src="assets/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="assets/js/tabletop.js"></script>
    <script type="text/javascript">

      $(document).ready(function(){

        var public_spreadsheet_url = '0AsNAXuadeXIxdG1sSmZDRkJDT2J0ak1nVWIzQU5PVXc';

        Tabletop.init( { key: public_spreadsheet_url, callback: showInfo, simpleSheet: true } );

        function showInfo(data, tabletop) {
          createTable("locations_table", data, "Locations");
          createTable("permits_table", data, "Permits");
          createTable("licenses_table", data, "Licenses");
          createTable("contractors_table", data, "Licesned_Contractors");
          createTable("cases_table", data, "Cases");
          createTable("violations_table", data, "Violations");
          createTable("zoningappeal_table", data, "Zoning_Board_Appeals");
          createTable("liappeal_table", data, "LI_Review_Board_Appeals");
          createTable("buildingappeal_table", data, "Building_Board_Appeals");
          createTable("hearing_table", data, "Building_Board_Appeals");
          createTable("hearing_dates_table", data, "Hearing_Dates");
        }

        function createTable(name, data, tabletype) {
          $("#" + name).append("<table id=\"" + name + "fields\" class=\"table table-bordered table-striped\">");
          $("#" + name + "fields").append("<tr><th>API Field</th><th>Description</th><th>Data Type</th></tr>");
          $.each(data, function(i, item) {
            if(data[i].tabletype == tabletype) {
              var cell_content = "<tr><td>" + data[i].name + "</td><td>" + data[i].description + "</td><td>" + data[i].datatype + "</td></tr>";
              $("#" + name + "fields").append(cell_content);
               }
            });
          $("#" + name + "fields").append("</table>");
        }

      });

    </script>
  </body>
</html>
